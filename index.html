<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checklist Empilhadeira - Garret Formação e Segurança</title>
<style>
body { font-family: Arial, sans-serif; background: #0d1f0d; color: #fff; margin: 0; padding: 20px; }
h2 { text-align: center; }
.container { max-width: 700px; margin: auto; background: #1f3b1f; padding: 20px; border-radius: 10px; }
input, button { width: 100%; padding: 10px; margin-top: 8px; border-radius: 6px; border: none; }
button { background: #198754; color: white; font-weight: bold; cursor: pointer; }
button:hover { background: #157347; }
.item { margin-bottom: 10px; padding: 10px; background: #2e4c2e; border-radius: 6px; }
label { display: block; margin-bottom: 6px; font-weight: bold; }
.btn-group { display: flex; justify-content: space-between; }
.btn-group button { width: 48%; }
.btn-yes { background: #28a745; }
.btn-no { background: #dc3545; }
.btn-yes.active { box-shadow: 0 0 8px #28a745; opacity: 0.9; }
.btn-no.active { box-shadow: 0 0 8px #ff4d4d; opacity: 0.9; }
.hidden { display: none; }
</style>
</head>
<body>

<div id="pagina-inicial" class="container">
  <h2>Checklist Diário - Empilhadeira</h2>
  <label>Nome do Operador:</label>
  <input id="operador" type="text" placeholder="Digite o nome do operador">
  <label>Número da Máquina:</label>
  <input id="maquina" type="text" placeholder="Digite o número da máquina">
  <button onclick="iniciarChecklist()">Iniciar Checklist</button>
</div>

<div id="pagina-checklist" class="container hidden">
  <h2>Checklist Diário</h2>
  <div id="checklist"></div>
  <button onclick="gerarPDF()">Gerar Relatório</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const { jsPDF } = window.jspdf;

const perguntas = [
  "Pontos de apoio estão OK?",
  "Partida com senha, está OK?",
  "Painel de instrumentos está OK?",
  "Sensor de banco está OK?",
  "Cinto de segurança está desligando ou impedindo aceleração?",
  "Buzina está OK?",
  "Limpador de para-brisas está OK?",
  "Para-brisa e teto estão OK?",
  "Retrovisores estão OK?",
  "Freios estão OK?",
  "Extintor (validade, lacre e carga) está OK?",
  "LEDs laterais estão OK?",
  "Blue Spot está OK?",
  "Lâmpadas dianteiras estão OK?",
  "Lâmpadas traseiras estão OK?",
  "Sirene de ré está OK?",
  "Ausência de vazamento de óleo?",
  "Mangueiras da torre estão OK?",
  "Garfo (trava e borracha de proteção) está OK?",
  "Pneus estão OK?",
  "Rodas (trincas e parafusos) estão OK?"
];

const respostas = {};

function iniciarChecklist() {
  const operador = document.getElementById("operador").value.trim();
  const maquina = document.getElementById("maquina").value.trim();
  if (!operador || !maquina) {
    alert("Por favor, preencha o nome do operador e o número da máquina.");
    return;
  }
  document.getElementById("pagina-inicial").classList.add("hidden");
  document.getElementById("pagina-checklist").classList.remove("hidden");

  const checklistDiv = document.getElementById("checklist");
  checklistDiv.innerHTML = "";

  perguntas.forEach((p, i) => {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <label>${p}</label>
      <div class="btn-group">
        <button id="sim${i}" class="btn-yes" onclick="responder(${i}, 'Sim')">Sim</button>
        <button id="nao${i}" class="btn-no" onclick="responder(${i}, 'Não')">Não</button>
      </div>
    `;
    checklistDiv.appendChild(div);
  });
}

function responder(indice, valor) {
  respostas[perguntas[indice]] = valor;

  const btnSim = document.getElementById("sim" + indice);
  const btnNao = document.getElementById("nao" + indice);

  btnSim.classList.remove("active");
  btnNao.classList.remove("active");

  if (valor === "Sim") btnSim.classList.add("active");
  else btnNao.classList.add("active");
}

function gerarPDF() {
  const doc = new jsPDF();
  const operador = document.getElementById("operador").value;
  const maquina = document.getElementById("maquina").value;
  let y = 10;

  doc.setFontSize(14);
  doc.text("Relatório Diário - Empilhadeira", 10, y);
  y += 10;
  doc.setFontSize(12);
  doc.text(`Operador: ${operador}`, 10, y);
  y += 7;
  doc.text(`Número da Máquina: ${maquina}`, 10, y);
  y += 10;

  perguntas.forEach(p => {
    const resposta = respostas[p] || 'Não respondido';
    if (resposta === 'Não') {
      doc.setTextColor(255, 0, 0);
    } else {
      doc.setTextColor(0, 0, 0);
    }
    doc.text(`${p} - ${resposta}`, 10, y);
    y += 7;
    if (y > 270) { doc.addPage(); y = 10; }
  });

  doc.save(`Relatorio_${operador || 'Operador'}.pdf`);
}
</script>

</body>
</html>
